function dologin(){self.location=rootURLSecure+"/account/log_in.cfm?my_referrer="+thisURLEncoded}function liked(action,id,isLiked){var url="/likes.cfm?action="+action+"&id="+id+"&value="+isLiked;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){"class_likes"==action&&$("#class_likes").html(html),"comment_likes"==action&&($("#comment_likes_"+id).html(html),$("#like_button_"+id).addClass("disabled"))}})}function checkAll(field){for(i=0;i<field.length;i++)field[i].checked=!0}function uncheckAll(field){for(i=0;i<field.length;i++)field[i].checked=!1}function big_photo(which_photo,width,height){var URL="../big_photo.cfm?image_link="+which_photo+"&width="+width+"&height="+height,features="width="+width+",height="+height+",location=no,menubar=no,scrollbars=auto,status=no,toolbar=no,resizable=no,top=10,left=10";window.open(URL,"yt_photo",features)}function popUp(URL,windowName,width,height){var features="width="+width+",height="+height+",location=no,menubar=no,scrollbars=yes,status=no,toolbar=no,resizable=yes,top=10,left=10";window.open(URL,windowName,features)}function markSelection(txtObj){txtObj.createTextRange&&(txtObj.caretPos=document.selection.createRange().duplicate(),isSelected=!0)}function insertTag(txtName,tag,enclose){var closeTag=tag;if(enclose){var attribSplit=tag.indexOf(" ");-1<tag.indexOf(" ")&&(closeTag=tag.substring(0,attribSplit))}if(isSelected){var txtObj=eval("document.forms[0]."+txtName);if(txtObj.createTextRange&&txtObj.caretPos){var caretPos=txtObj.caretPos;caretPos.text=enclose?"<"+tag+">"+caretPos.text+"</"+closeTag+">":"<"+tag+">"+caretPos.text,markSelection(txtObj),""==txtObj.caretPos.text&&(isSelected=!1,txtObj.focus())}isSelected=!1}else alert("You need to select the text to which you want to apply formatting.")}function insertTag2(txtName,tag,enclose){var closeTag=tag;if(link_url=prompt("Link URL (for example: 'http://www.usc.edu')",""),enclose){var attribSplit=tag.indexOf(" ");-1<tag.indexOf(" ")&&(closeTag=tag.substring(0,attribSplit))}if(isSelected){var txtObj=eval("document.forms[0]."+txtName);if(txtObj.createTextRange&&txtObj.caretPos){var caretPos=txtObj.caretPos;caretPos.text=enclose?"<"+tag+" href='"+link_url+"'>"+caretPos.text+"</"+closeTag+">":"<"+tag+">"+caretPos.text,markSelection(txtObj),""==txtObj.caretPos.text&&(isSelected=!1,txtObj.focus())}isSelected=!1}else alert("You need to select the text to which you want to apply formatting.")}function confirmQueueremove(class_id){ok=confirm("Are you sure you want to remove this class from your queue?"),ok&&(self.location="/classes.cfm?action=queue_remove&my_class_id="+class_id)}function confirmFavremove(class_id){ok=confirm("Are you sure you want to remove this class from your favorites list?"),ok&&(self.location="/classes.cfm?action=fav_remove&my_class_id="+class_id)}function confirmMyremove(class_id){ok=confirm("Are you sure you want to mark this video as un-watched?"),ok&&(self.location="/classes.cfm?action=my_remove&my_class_id="+class_id)}function update2(limit,field_name,counter_name){my_field=document.getElementById(field_name),cur_val=my_field.value.length,my_counter=document.getElementById(counter_name);var old=my_counter.value;my_counter.value=cur_val,my_counter.value>limit&&old<=limit?(alert("Your comment is too long! "+limit+" chars max."),document.styleSheets&&(my_counter.style.fontWeight="bold",my_counter.style.color="#ff0000")):my_counter.value<=limit&&limit<old&&document.styleSheets&&(my_counter.style.fontWeight="normal",my_counter.style.color="#000000")}function delConfirm(obj_name,my_url){is_ok=confirm("Are you sure you want to delete this "+obj_name+"?"),is_ok&&(self.location=my_url)}function clearSearch(search_word){my_value=document.getElementById("topsearchq").value,my_value==search_word&&(document.getElementById("topsearchq").value="")}function imageBox(){my_url="/functions/upload_image.cfm?image_type=forum",show_modal_iframe("G",my_url)}function confirmDelPost(comment_id,forum_id,class_id,editorial_id,playlist_id,thread_id){confirm("Are you sure you want to delete this post?")&&(self.location="/forums/forum.cfm?forum_id="+forum_id+"&class_id="+class_id+"&editorial_id="+editorial_id+"&playlist_id="+playlist_id+"&thread_id="+thread_id+"&action=delete_post&comment_id="+comment_id)}function checkData(){var result=!0,error_mess="",num_errors=0;return 1e3<document.newmess_form.comment.value.length&&(result=!1,error_mess=error_mess+(num_errors+=1)+") Your comment is too long. The maximum length is 1000 characters, the current length is "+document.newmess_form.comment.value.length+" characters. If you have an especially long comment to post, you can seperate it into two or more posts if you wish.\n\n"),document.newmess_form.subject&&""===document.newmess_form.subject.value&&(result=!1,error_mess=error_mess+(num_errors+=1)+") You need to enter a subject.\n\n"),""===document.newmess_form.comment.value&&(result=!1,error_mess=error_mess+(num_errors+=1)+") You need to enter a comment.\n\n"),result||alert("Sorry, can't do that right now because:\n\n"+error_mess),result}function AddText(NewCode){document.newmess_form.comment.value+=NewCode,Stretchy.resize(document.newmess_form.comment)}function hyperlink(){var txt2=prompt("Text to be shown for the link.","");if(null!==txt2){var txt=prompt("URL for the link.","http://");txt.indexOf("http")<0&&(txt=prompt("URL must contain 'http'. Please re-type URL.",txt)),txt.indexOf("http")<0?alert("Link not added. URL did not contain 'http'."):(AddTxt=""===txt2?"[url="+txt+"]"+txt+"[/url]":"[url="+txt+"]"+txt2+"[/url]",AddText(AddTxt))}}function forumImageZoom(myImage){$.fancybox.open([{src:myImage.src}])}function image(){window.open("photo_upload.asp","photo_upload","width=650,height=450,location=no,menubar=no,scrollbars=yes,status=no,toolbar=no,resizable=no,top=10,left=10")}function spoiler(){alert("Please place spoiler text between the [spoiler][/spoiler] tags (these will be inserted)"),AddText("[spoiler]SpoilerText[/spoiler]")}function showSpoiler(my_sp_name,my_sp_name2){document.getElementById(my_sp_name2).style.display="none",document.getElementById(my_sp_name).style.display="block"}function big_photo(which_photo,width,height){var URL="/bigphoto.asp?desc=Photo&file_path="+which_photo,features="width="+width+",height="+height+",location=no,menubar=no,scrollbars=auto,status=no,toolbar=no,resizable=no,top=10,left=10";window.open(URL,"yt_photo",features)}function quoteMe(handle,comment,mydate){document.newmess_form.comment.value="[quote]On "+mydate+" "+handle+" wrote: "+comment+"[/quote]\n"+document.newmess_form.comment.value,document.newmess_form.comment.focus()}function quoteMe2(comment){document.newmess_form.comment.value=comment+"\n"+document.newmess_form.comment.value,document.newmess_form.comment.focus()}function smileHelp(){loader_frame.location="/forums/smile_help.cfm",showLoader(1)}function showLoader(show){show?(ds="block","Explorer"==BrowserDetect.browser&&BrowserDetect.version<=6&&(my_win_width=400,my_win_height=300,my_left=document.documentElement.clientWidth/2-my_win_width/2,new_my_left=round_decimals(my_left,0),my_top=document.documentElement.clientHeight/2-my_win_height/2,new_my_top=round_decimals(my_top,0),my_scroll_top=round_decimals(document.documentElement.scrollTop,0),new_my_top2=1*new_my_top+1*my_scroll_top,document.getElementById("loader").style.position="absolute",document.getElementById("loader").style.left=new_my_left,document.getElementById("loader").style.marginLeft=0,document.getElementById("loader").style.top=new_my_top2,document.getElementById("loader").style.marginTop=0)):ds="none",document.getElementById("loader_bg").style.display=ds,document.getElementById("loader").style.display=ds,show||(frames.loader_frame.location.href="/layout/blank.html")}function checkNewMessages(PMThreadID){var url="/messages/ajax/thread_ajax.cfm?action=check_for_new&pm_thread_id="+PMThreadID;$.ajax({type:"GET",dataType:"json",url:url,success:function(data){0<data.NEW_COUNT?($(".js-messages-counter").show(),$(".js-messages-counter").html(data.NEW_COUNT)):$(".js-messages-counter").hide(),$("#new_messages_ul").html(data.MENU_HTML)},error:function(){}})}function checkNewFriendReqs(){$.ajax({type:"GET",dataType:"json",url:"/messages/ajax/friend_request_ajax.cfm?action=check_for_new",success:function(data){0<data.NEW_COUNT?($(".js-friends-counter").show(),$(".js-friends-counter").html(data.NEW_COUNT)):$(".js-friends-counter").hide(),$("#friends_menu_ul").html(data.MENU_HTML)},error:function(){}})}function sendFriendRequest(toCustID,funcSource){if(friend_request_error=!1,ok=1,ok){$("#friend_req_div_"+toCustID).html("Sending...");var url="/messages/ajax/friend_request_ajax.cfm?action=new_request&to_customer_id="+toCustID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):"profile"==funcSource?(new_html='<div class="tm-profile-pm-message">'+html+"</div>",$("#friend_req_div_"+toCustID).html(new_html)):$("#friend_req_div_"+toCustID).html(html)},error:function(){alert(html)}})}}function updateSettings(settingAction){my_checkbox="#"+settingAction+"_checkbox",my_alertdiv="#"+settingAction+"_alert",$(my_checkbox).is(":checked")?my_setting=1:my_setting=0,$(my_alertdiv).html("Saving...");var url="/messages/ajax/pm_settings_ajax.cfm?action="+settingAction+"&setting="+my_setting;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):$(my_alertdiv).html("Saved.")},error:function(){alert(html)}})}function updateEmailPref(PMThreadID){$("#email_pref_checkbox").is(":checked")?my_get_emails=1:my_get_emails=0,$("#email_pref_alert").html("Saving...");var url="/messages/ajax/email_pref_ajax.cfm?get_emails="+my_get_emails+"&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):$("#email_pref_alert").html("<span style='color:blue;'>Saved.</span>")},error:function(){alert(html)}})}function launchRecipChooserModal(){show_modal_iframe("D","/messages/pm_recipients.cfm?recipients="+JSON.stringify(recipArr))}function addRecipients(myFriendArr){var data_to_send=JSON.stringify(myFriendArr),dataobj={};dataobj.recip_array=data_to_send;$.ajax({type:"GET",url:"/messages/ajax/recipient_ajax.cfm?action=add_recips",data:dataobj,success:function(html){$("#recip_list_div").html(html)},error:function(){}}),recipArr=myFriendArr,$("#recipients").val(recipArr)}function removeRecip(customerID){-1!=$.inArray(customerID,recipArr)&&(recipArr.splice($.inArray(customerID,recipArr),1),$("#recipient_"+customerID).remove(),$("#recipients").val(recipArr),$("#friend_row_"+customerID).toggleClass("tm-friend-card-sel"))}function toggleFriend(customerID){-1==$.inArray(customerID,friendArr)?friendArr.push(customerID):(friendArr.splice($.inArray(customerID,friendArr),1),removeRecip(customerID)),$("#friend_row_"+customerID).toggleClass("tm-friend-card-sel")}function addRecips(){addRecipients(friendArr),$("#addRecipsModal").modal("toggle"),$("#newsubject").focus()}function unFriend(customerID){if(friend_request_error=!1,ok=confirm("Are you sure you want to un-friend this person?"),ok){$("#action_div_"+customerID).html("Saving...");var url="/messages/ajax/friend_request_ajax.cfm?action=unfriend&friend_customer_id="+customerID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):($("#action_div_"+customerID).html(html),$("#friend_row_"+customerID).fadeOut())},error:function(){alert(html)}})}}function doFriendRequest(action,friendRequestID){friend_request_error=!1,$("#action_div_"+friendRequestID).html("Saving...");var url="/messages/ajax/friend_request_ajax.cfm?action="+action+"_request&friend_request_id="+friendRequestID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):$("#action_div_"+friendRequestID).html(html)},error:function(){alert(html)}})}function PMThreadLeave(PMThreadID){if(ok=confirm("Are you sure you want to leave this conversation?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=leave&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):($("#action_div_"+PMThreadID).html(html),$("#thread_row_"+PMThreadID).fadeOut())},error:function(){alert(html)}})}}function PMThreadLeaveFromRead(PMThreadID){if(ok=confirm("Are you sure you want to leave this conversation?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=leave&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):self.location="/messages/pms.cfm?action=read&pm_thread_id="+PMThreadID},error:function(){alert(html)}})}}function PMThreadRejoin(PMThreadID){if(ok=confirm("Are you sure you want to re-join this conversation?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=rejoin&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):($("#action_div_"+PMThreadID).html(html),$("#thread_row_"+PMThreadID).fadeOut())},error:function(){alert(html)}})}}function PMThreadRejoinFromRead(PMThreadID){if(ok=confirm("Are you sure you want to re-join this conversation?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=rejoin&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):self.location="/messages/pms.cfm?action=read&pm_thread_id="+PMThreadID},error:function(){alert(html)}})}}function PMThreadDelete(PMThreadID){if(ok=confirm("Are you sure you want to delete this thread?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=delete&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):($("#action_div_"+PMThreadID).html(html),$("#thread_row_"+PMThreadID).fadeOut())},error:function(){alert(html)}})}}function PMThreadDeleteFromRead(PMThreadID){if(ok=confirm("Are you sure you want to delete this thread?"),ok){$("#action_div_"+PMThreadID).html("Saving...");var url="/messages/ajax/thread_ajax.cfm?action=delete&pm_thread_id="+PMThreadID;$.ajax({type:"GET",url:url,success:function(html){-1<html.indexOf("ERROR")?alert(html):self.location="/messages/pms.cfm?action=threads"},error:function(){alert(html)}})}}function checkDayChooser(num_needed){var num_checked_ok=!1;if($(".js-days-of-week:checked").length!=num_needed)$("#js-day-choose-error").show(400);else{$("#js-day-choose-error").hide(400);num_checked_ok=!0}return console.log("ok? "+num_checked_ok),num_checked_ok}function checkPosition(my_video_id,my_chapter){var url="/classes/resume_ajax.cfm?my_customer_id="+pa_customer_id+"&k="+pa_key+"&my_video_id="+my_video_id+"&my_chapter="+my_chapter;$.getJSON(url,function(jsonresult){10<jsonresult[0].CURRENT_POSTION&&($("#js-video-resume-switch").show(),$("#js-progress-video").show(),$("#js-progress-video-bar").css("width",jsonresult[0].PERCENT_VIEWED),$("#video_view_pos").val(jsonresult[0].CURRENT_POSTION))})}function checkPositionForChapter(my_video_id,my_chapter){var url="/classes/resume_ajax.cfm?my_customer_id="+pa_customer_id+"&k="+pa_key+"&my_video_id="+my_video_id+"&my_chapter="+my_chapter;$.getJSON(url,function(jsonresult){10<jsonresult[0].CURRENT_POSTION&&($("#js-chapter-progress-"+my_chapter).css("width",jsonresult[0].PERCENT_VIEWED),$("#js-chapter-progress-container-"+my_chapter).show(100))})}function updateViewed(my_class_id){$.getJSON("/classes/class_customization_json.cfm",{action:"viewed_classes",class_ids:my_class_id},function(json_data){$.each(json_data,function(index,value){$("#viewed_status").html("Viewed "+value+' <a href="javascript:confirmclassviewmyremove('+my_class_id+')"><span class="glyphicon glyphicon-remove-circle"></span></a>')})})}function remFromPlaylist(my_class_id,my_playlist_id,my_playlist_type){if(ok=confirm("Are you sure you want to remove this video from your playlist?"),ok){var url="/classes/playlists_ajax.cfm?action=rem&my_class_id="+my_class_id+"&my_key="+pa_key+"&my_customer_id="+pa_customer_id+"&my_playlist_id="+my_playlist_id;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){-1<html.indexOf("ERROR")?alert(html):(bar_div="#playlist_bar_"+my_playlist_id,$(bar_div).toggle(),"F"==my_playlist_type&&($("#js-fav-button").toggleClass("btn-info"),$("#js-fav-button").toggleClass("btn-default"),$("#js-fav-button-text").html("Favorite"),i_fav=!1),"Q"==my_playlist_type&&($("#queue_button"+my_class_id).toggleClass("btn-info"),$("#queue_button"+my_class_id).toggleClass("btn-default"),$("#js-queue-button-text"+my_class_id).html("Queue")),"C"==my_playlist_type&&(custom_add_text_div="#custom_add_text_"+my_playlist_id,$(custom_add_text_div).toggle()))}})}}function saveToCustomPlaylist(my_class_id,my_playlist_id){custom_add_text_div="#custom_add_text_"+my_playlist_id;var url="/playlists/add_to_playlist.cfm?custid="+pa_customer_id+"&k="+pa_key+"&classid="+my_class_id+"&my_playlist_id="+my_playlist_id+"&my_playlist_type=C&my_note=&my_title=&my_rank=L&bootstrap=Y";$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){-1<html.indexOf("ERROR")?alert(html):(new_html=$("#added_playlists_space").html()+html,$("#added_playlists_space").show(),$("#added_playlists_space").html(new_html),$(custom_add_text_div).toggle())}})}function editPlaylistNote(my_class_id,my_playlist_id){display_area_div="#note_display_div_"+my_playlist_id,edit_area_div="#note_edit_div_"+my_playlist_id,remove_area_div="#remove_display_div_"+my_playlist_id,$(display_area_div).toggle(),$(edit_area_div).toggle(),$(remove_area_div).toggle()}function editPlaylistNoteEditMode(my_class_id,my_playlist_id){text_editbox_div="#descriptionEdit_"+my_playlist_id+"_"+my_class_id,$(text_editbox_div).show(),text_area_div="#descriptionShow_"+my_playlist_id+"_"+my_class_id,$(text_area_div).hide(),edit_button_div="#descriptionEditButton_"+my_playlist_id+"_"+my_class_id,$(edit_button_div).hide()}function addPlaylistNote(my_class_id,my_playlist_id){add_area_div="#add_display_div_"+my_playlist_id,edit_area_div="#note_edit_div_"+my_playlist_id,remove_area_div="#remove_display_div_"+my_playlist_id,$(add_area_div).toggle(),$(edit_area_div).toggle(),$(remove_area_div).toggle()}function discardPlaylistNote(my_class_id,my_playlist_id){desc_id="#pl_note_desc_"+my_playlist_id,note_value=$(desc_id).val(),orig_desc_id="#pl_orig_note_desc_"+my_playlist_id,orig_note_value=$(orig_desc_id).val(),""!=note_value&&note_value!=orig_note_value?ok=confirm("Are you sure you want to discard changes to this note?"):ok=!0,ok&&(""==note_value?addPlaylistNote(my_class_id,my_playlist_id):editPlaylistNote(my_class_id,my_playlist_id))}function discardPlaylistNoteEditMode(my_class_id,my_playlist_id){text_area_div="#descriptionShow_"+my_playlist_id+"_"+my_class_id,$(text_area_div).show(),edit_button_div="#descriptionEditButton_"+my_playlist_id+"_"+my_class_id,$(edit_button_div).show(),text_editbox_div="#descriptionEdit_"+my_playlist_id+"_"+my_class_id,$(text_editbox_div).hide()}function savePlaylistNote(my_class_id,my_playlist_id){desc_id="#pl_note_desc_"+my_playlist_id,new_desc=$(desc_id).val(),new_desc=encodeURIComponent(new_desc);var url="/playlists/playlist_note_save.cfm?custid="+pa_customer_id+"&k="+pa_key+"&classid="+my_class_id+"&my_playlist_id="+my_playlist_id+"&my_note="+new_desc;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){-1<html.indexOf("ERROR")?alert(html):(text_area_div="#note_text_div_"+my_playlist_id,$(text_area_div).html(html),editPlaylistNote(my_class_id,my_playlist_id))}})}function savePlaylistNoteEditMode(my_class_id,my_playlist_id){desc_id="#descriptionInput_"+my_playlist_id+"_"+my_class_id,new_desc=$(desc_id).val(),new_desc=encodeURIComponent(new_desc);var url="/playlists/playlist_note_save.cfm?custid="+pa_customer_id+"&k="+pa_key+"&classid="+my_class_id+"&my_playlist_id="+my_playlist_id+"&my_note="+new_desc;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){-1<html.indexOf("ERROR")?alert(html):(text_area_div="#descriptionShow_"+my_playlist_id+"_"+my_class_id,$(text_area_div).html(html),""==$(text_area_div).html()&&$(text_area_div).html("(No note)"),$(text_area_div).show(),edit_button_div="#descriptionEditButton_"+my_playlist_id+"_"+my_class_id,$(edit_button_div).show(),text_editbox_div="#descriptionEdit_"+my_playlist_id+"_"+my_class_id,$(text_editbox_div).hide())}})}function savePlaylistNoteWithAdd(my_class_id,my_playlist_id){desc_id="#pl_note_add_desc_"+my_playlist_id,new_desc=$(desc_id).val(),new_desc=encodeURIComponent(new_desc);var url="/playlists/playlist_note_save.cfm?custid="+pa_customer_id+"&k="+pa_key+"&classid="+my_class_id+"&my_playlist_id="+my_playlist_id+"&my_note="+new_desc;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){-1<html.indexOf("ERROR")?alert(html):(new_html="<span style='color:black;'><i class='far fa-edit'></i> "+html+"</span> (note saved) ",$("#pl_note_add_span").html(new_html))}})}function confirmThreadDel(thread_id,forum_id){if(confirm("Are you sure you want to delete this thread and all the posts within it?")){var new_url="/forums/forum.cfm?action=del_thread&forum_id="+forum_id+"&thread_id="+thread_id;self.location=new_url}}function show_modal_iframe(size_code,url){if(1==size_code.length)var width=timeshift_media.iframe_sizes[size_code][0]+"px",height=timeshift_media.iframe_sizes[size_code][1]+"px";else width=size_code,height=size_code;$.fancybox.open({src:url,type:"iframe",opts:{iframe:{css:{width:width,height:height}}}})}function show_modal_video(url){"mobile"==timeshift_media.display_type?show_modal_iframe("100%",url):show_modal_iframe("G",url)}function show_modal_video_2(url){"mobile"==timeshift_media.display_type?show_modal_iframe(300,300,url):show_modal_iframe(950,660,url)}function show_modal_message(url){"mobile"==timeshift_media.display_type?show_modal_iframe("100%","100%",url):show_modal_iframe(660,500,url)}function createCookie(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toUTCString()}document.cookie=name+"="+value+expires+"; secure; path=/"}function readCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}function toggle_show_follow(show_id){if(timeshift_media.logged_in){var url="/shows/show_follows.cfc?method=togglecustomershowfollow&show_id="+show_id+"&my_key="+pa_key+"&my_customer_id="+pa_customer_id;$.get(url,function(){$("#follow_button").toggleClass("btn-primary btn-primary-ghost"),$("#follow_button").hasClass("btn-primary")?$("#follow_button_text").html("Following"):$("#follow_button_text").html("Follow")})}else $("#accountNeededModal").modal()}function toggle_instructor_follow(instructor_id){if(timeshift_media.logged_in){var url="/instructors/instructor_follows.cfc?method=togglecustomerinstructorfollow&instructor_id="+instructor_id+"&my_key="+pa_key+"&my_customer_id="+pa_customer_id;$.get(url,function(){$("#follow_button").toggleClass("btn-primary btn-primary-ghost"),$("#follow_button").hasClass("btn-primary")?$("#follow_button_text").html("Following"):$("#follow_button_text").html("Follow")})}else $("#accountNeededModal").modal()}function isValidEmailAddress(emailAddress){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(emailAddress)}function validateTeamName(){return!($("#team_name").val().length<=0)||($("#js-form-error-team-name").show(200),!1)}function validateInitAccounts(my_min){return!(!$.isNumeric($("#init_accounts").val())||$("#init_accounts").val()<my_min)||($("#js-form-error-init-accounts").show(200),!1)}function checkFirstAndLastName(){0<$("#first_name").val().length&&0<$("#last_name").val().length?$("#js-last-name-group").addClass("has-success"):$("#js-last-name-group").removeClass("has-success")}function checkFirstName(){$("#js-form-error-first-name").hide(200),$("#js-form-error-submit").hide(200),0<$("#first_name").val().length&&$("#first_name").val().length<51?$("#js-first-name-group").addClass("has-success"):$("#js-first-name-group").removeClass("has-success")}function validateFirstName(){return!($("#first_name").val().length<=0||50<$("#first_name").val().length)||($("#js-form-error-first-name").show(200),!1)}function validateLastName(){return!($("#last_name").val().length<=0||50<$("#last_name").val().length)||($("#js-form-error-last-name").show(200),!1)}function checkLastName(){$("#js-form-error-last-name").hide(200),$("#js-form-error-submit").hide(200),0<$("#last_name").val().length&&$("#last_name").val().length<51?$("#js-last-name-group").addClass("has-success"):$("#js-last-name-group").removeClass("has-success")}function checkEmail(myemail){$("#js-form-error-email").hide(200),$("#js-form-error-submit").hide(200),$("#email_dupe_error").hide(400),$("#js-email-group").removeClass("has-error"),isValidEmailAddress(myemail)?$("#js-email-group").addClass("has-success"):$("#js-email-group").removeClass("has-success")}function validateEmail(){return myemail=$("#email").val(),!!isValidEmailAddress(myemail)||($("#js-form-error-email").show(200),!1)}function checkTerms(){$("#js-form-error-terms-ok").hide(200),$("#js-form-error-submit").hide(200),$("#terms_ok").is(":checked")?$("#checkmark-terms").show():$("#checkmark-terms").hide()}function validateTerms(){return!!$("#terms_ok").is(":checked")||($("#js-form-error-terms-ok").show(200),!1)}function checkPWOK(){return my_message=checkStrength($("#pw").val()),"Weak"==my_message||"Good"==my_message||"Strong"==my_message}function validatePW(){return!!checkPWOK()||($("#js-form-error-pw").show(200),!1)}function checkStrength(password){if($("#js-form-error-pw").hide(200),$("#js-form-error-submit").hide(200),0<password.length){var strength=0;return 6<=password.length?(1,$("#js-password-group").addClass("has-success")):$("#js-password-group").removeClass("has-success"),password.length<6?"Too short":(7<password.length&&(strength+=1),password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(strength+=1),password.match(/([a-zA-Z])/)&&password.match(/([0-9])/)&&(strength+=1),password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1),password.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,",%,&,@,#,$,^,*,?,_,~])/)&&(strength+=1),strength<2?"Weak":2==strength?"Good":"Strong")}}function setCouponDefaults(){$("span.trial_duration").html("15"),$("span.js-sub-amount-monthly").html(js_sub_amount_monthly),$("span.js-sub-amount-annual").html(js_sub_amount_annual)}function CheckStepOneCoupon(){setCouponDefaults();var coupon_code=$("#coupon_code").val();if(0<coupon_code.length){$("#has_coupon").val("true");var url="/account/new_account/check_detail.cfm?action=get_coupon_info&coupon_code="+coupon_code;$.ajax({type:"GET",url:url,data:"",async:!0,success:function(html){if(0<html.length){var obj=jQuery.parseJSON(html);obj.hasOwnProperty("period")?($("#coupon_success_message").html(obj.message),$("#coupon_success").show(400),$("#js-apply-step-one-coupon").hide(),$("span.trial_duration").html(obj.period),$("#js-coupon-group").addClass("has-success"),$("#coupon_info").hide(),$("#coupon_error").hide()):"cb_fixed_amount"==obj.status?($("span.js-sub-amount-"+obj.subscription_term).html(obj.sub_price_display_formatted),$("#js-coupon-group").addClass("has-success"),$("#coupon_success_message").html(obj.message),$("#coupon_success").show(400),$("#js-apply-step-one-coupon").hide(),$("#coupon_info").hide(),$("#coupon_error").hide()):"GC"==obj.status?($("#coupon_success_message").html(obj.message),$("#coupon_success").show(400),$("#js-apply-step-one-coupon").hide(),$("#js-coupon-group").addClass("has-success"),$("#coupon_info").hide(),$("#coupon_error").hide()):"Error"!=obj.status?($("#coupon_info_message").html(obj.message),$("#coupon_info").show(400),$("#js-coupon-group").removeClass("has-success"),$("#coupon_success").hide(),$("#coupon_error").hide()):($("#coupon_error_message").html(obj.message),$("#coupon_error").show(400),$("#js-coupon-group").removeClass("has-success"),$("#coupon_success").hide(),$("#coupon_info").hide())}}})}else $("#coupon_success").hide(400),$("#coupon_error").hide(400),$("#coupon_info_message").html("Please enter a coupon code."),$("#coupon_info").show(400),$("#js-coupon-group").removeClass("has-success")}function checkEmailForDuplicate(){$("#email_dupe_error").hide(400),$("#js-email-group").removeClass("has-error");var email=$("#email").val();if(1<email.length){email_ok=!0;var url="/account/new_account/check_detail.cfm?action=check_email&email="+email;$.ajax({type:"GET",url:url,data:"",async:!1,success:function(html){if(0<html.length){var obj=jQuery.parseJSON(html);"ActiveDupe"==obj.status&&($("#email_dupe_error").show(400),$("#js-email-group").addClass("has-error"),email_ok=!1),"InactiveDupe"==obj.status&&($("#email_dupe_error").show(400),$("#js-email-group").addClass("has-error"),$("#email_dupe_error_message").html("This email address is already associated with an account."),email_ok=!1)}}})}}function highlightCC(bt_cc_type){console.log("highlightCC("+bt_cc_type+")"),bt_card_type="visa",cc_card_type="visa",my_id="#cc-"+cc_card_type,bt_cc_type==bt_card_type?$(my_id).hasClass("cc_icon_sel")||$(my_id).toggleClass("cc_icon cc_icon_sel"):$(my_id).hasClass("cc_icon_sel")&&$(my_id).toggleClass("cc_icon cc_icon_sel"),bt_card_type="american-express",cc_card_type="amex",my_id="#cc-"+cc_card_type,bt_cc_type==bt_card_type?$(my_id).hasClass("cc_icon_sel")||$(my_id).toggleClass("cc_icon cc_icon_sel"):$(my_id).hasClass("cc_icon_sel")&&$(my_id).toggleClass("cc_icon cc_icon_sel"),bt_card_type="master-card",cc_card_type="mastercard",my_id="#cc-"+cc_card_type,bt_cc_type==bt_card_type?$(my_id).hasClass("cc_icon_sel")||$(my_id).toggleClass("cc_icon cc_icon_sel"):$(my_id).hasClass("cc_icon_sel")&&$(my_id).toggleClass("cc_icon cc_icon_sel"),bt_card_type="discover",cc_card_type="discover",my_id="#cc-"+cc_card_type,bt_cc_type==bt_card_type?$(my_id).hasClass("cc_icon_sel")||$(my_id).toggleClass("cc_icon cc_icon_sel"):$(my_id).hasClass("cc_icon_sel")&&$(my_id).toggleClass("cc_icon cc_icon_sel")}function checkCCNum(bt_cc_type){prev_cc_card_type=cc_card_type,"visa"==bt_cc_type&&(cc_card_type="visa"),"american-express"==bt_cc_type&&(cc_card_type="amex"),"master-card"==bt_cc_type&&(cc_card_type="mastercard"),"discover"==bt_cc_type&&(cc_card_type="discover"),prev_cc_card_type!=cc_card_type&&"unknown"!=prev_cc_card_type&&(my_id="#cc-"+prev_cc_card_type,$(my_id).toggleClass("cc_icon cc_icon_sel")),prev_cc_card_type!=cc_card_type&&(my_id="#cc-"+cc_card_type,$(my_id).toggleClass("cc_icon cc_icon_sel")),is_exist_cc=!1}more_html='More <i class="far fa-arrow-down"></i>',less_html='Less <i class="far fa-arrow-up"></i>',$(document).ready(function(){$(".js-more-button").click(function(){$(".js-row-more").toggle(),current_html=$("#js-more-button").html(),$(".js-more-buttons-bottom").toggleClass("hidden"),$(".js-more-buttons-top").toggleClass("hidden"),$(".js-more-button").html()==more_html?$(".js-more-button").html(less_html):$(".js-more-button").html(more_html)}),$("#js-duration-button").click(function(){$("#js-filter-stripe-duration").toggle(),$("#js-duration-button .fa").toggleClass("fa-caret-down fa-caret-up"),$("#js-duration-button").toggleClass("tm-filter-button-selected")}),$("#js-level-button").click(function(){$("#js-filter-stripe-apparatus").hide(),$("#js-filter-stripe-duration").hide(),$("#js-filter-stripe-level").toggle(),$("#js-level-button .fa").toggleClass("fa-caret-down fa-caret-up"),$("#js-level-button").toggleClass("tm-filter-button-selected")}),$("#js-apparatus-button").click(function(){$("#js-filter-stripe-level").hide(),$("#js-filter-stripe-duration").hide(),$("#js-filter-stripe-apparatus").toggle(),$("#js-apparatus-button .fa").toggleClass("fa-caret-down fa-caret-up"),$("#js-apparatus-button").toggleClass("tm-filter-button-selected")})});var timeshift_media=void 0===timeshift_media?{}:timeshift_media;timeshift_media.grid_column_count=3,timeshift_media.use_tips=!0,timeshift_media.show_thumbnails={},timeshift_media.class_thumbnails={},timeshift_media.show_hint=function(show_id){var show=timeshift_media.show_thumbnails[show_id],hint_html=show.short_description;return null!==show.class_view_date?(hint_html=(hint_html=(hint_html=(hint_html=hint_html+"<div style='color:gray;'>"+show.show_text+":</div>")+"<div><a href='"+show.class_url+"'>")+"<i class='far fa-play-circle'></i> "+show.class_name+"</a></div>")+"<div style='color:lightgray;'><i class='far fa-eye'></i> "+show.class_view_date+"</div>",null!==show.watch_next_text&&(hint_html=(hint_html=(hint_html=hint_html+"<div style='color:gray; margin-top:10px;'>"+show.watch_next_text+":</div>")+"<div><a href='"+show.watch_next_url+"'>")+"<i class='far fa-play-circle'></i> "+show.watch_next_name+"</a></div>")):(hint_html+="<div style='color:gray; margin-top:10px; margin-bottom:8px;'>",hint_html=(hint_html=(hint_html+="Latest Episode:<br>")+"<a href='"+show.class_url+"'>")+"<i class='far fa-play-circle'></i> "+show.class_name,hint_html+="</a>",hint_html+="</div>"),hint_html=hint_html+"<div style='color:gray; margin-top:10px; margin-bottom:8px;'>"+show.season_count+"</div>"},smi="/smil/video.smil?";var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string,dataProp=data[i].prop;if(this.versionSearchString=data[i].versionSearch||data[i].identity,dataString){if(-1!=dataString.indexOf(data[i].subString))return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(-1!=index)return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();var recipArr=[];!function($){var proto=$.ui.autocomplete.prototype,initSource=proto._initSource;$.extend(proto,{_initSource:function(){this.options.html&&$.isArray(this.options.source)?this.source=function(request,response){response(filter(this.options.source,request.term))}:initSource.call(this)},_renderItem:function(ul,item){return $("<li></li>").data("item.autocomplete",item).append($("<a>").html(item.label)).appendTo(ul)}})}(jQuery),$(document).ready(function(){$(".js-days-of-week").change(function(){$("#js-day-choose-error").hide(400)})}),timeshift_media.debug=void 0!==timeshift_media.debug&&timeshift_media.debug,timeshift_media.facebook=void 0===timeshift_media.facebook?{}:timeshift_media.facebook,timeshift_media.facebook.getPages=function(){FB.api("/me/accounts",{fields:"link, name"},function(response){if(void 0!==response.data){var facebook_pages=response.data;0<facebook_pages.length?(facebook_pages.forEach(function(item){$("#facebook_pages").append('<option value="'+item.link+'">'+item.name+"</option>")}),$("#facebook_pages").show()):$("#facebook_business_message").show()}else $("#facebook_business_message").show()})},timeshift_media.facebook.checkPermissions=function(permissions){for(var perms_ok=!1,i=0;i<permissions.length;i++)"pages_show_list"===permissions[i].permission&&"granted"===permissions[i].status&&(perms_ok=!0);return perms_ok},timeshift_media.facebook.getPageList=function(){var error={caller:"getPageList"};$("#facebook_business_message").hide(),"undefined"==typeof FB?($("#facebook_business_message_error").show(),error.description="FB is undefined"):FB.getLoginStatus(function(response){"connected"===response.status?FB.api("/me/permissions",function(response){void 0!==response.data&&timeshift_media.facebook.checkPermissions(response.data)?timeshift_media.facebook.getPages():FB.login(function(){FB.api("/me/permissions",function(response){void 0!==response.data&&!0===timeshift_media.facebook.checkPermissions(response.data)?timeshift_media.facebook.getPages():($("#facebook_business_message").show(),error.description="Permissions error 1")})},{scope:"pages_show_list",return_scopes:!0})}):FB.login(function(){FB.api("/me/permissions",function(permissions){void 0!==permissions.data&&!0===timeshift_media.facebook.checkPermissions(permissions.data)?timeshift_media.facebook.getPages():($("#facebook_business_message").show(),error.description="Permissions error 2")})},{scope:"pages_show_list",return_scopes:!0})})},timeshift_media.facebook.setFacebookBusinessPage=function(){$("#site_type_id_7").val($("#facebook_pages :selected").val()),$("#facebook_business_page_title").val($("#facebook_pages :selected").text())},timeshift_media.facebook.deleteBusinessFacebook=function(){$("#facebook_business_page_title").val(""),$("#site_type_id_7").val(""),$("#delete_fb_business").hide(),$("#delete_fb_business_confirm").show(),$("#facebook_business_btn").hide()},timeshift_media.facebook.deletePersonalFacebook=function(){$("#site_type_id_1").val(""),$("#delete_fb_personal").hide(),$("#delete_fb_personal_confirm").show(),$("#facebook_btn").hide()},timeshift_media.facebook.loginAndLink=function(){$("#facebook_personal_message").hide(),FB.login(function(){timeshift_media.facebook.linkFacebookProfile(),timeshift_media.facebook.linkFacebookPages()},{scope:"pages_show_list",return_scopes:!0})},timeshift_media.facebook.linkFacebookPages=function(){FB.api("/me/accounts",{fields:"link, name"},function(response){console.log(response),$.each(response.data,function(index,value){$.ajax({url:"/account/profile/ajax/facebook.cfm",data:{action:"set_business_page",page_id:value.id,page_name:value.link,page_title:value.name}}).done(function(){})})})},timeshift_media.facebook.linkFacebookProfile=function(){FB.getLoginStatus(function(response){if("connected"===response.status){var uid=response.authResponse.userID,access_token=response.authResponse.accessToken;FB.api("/me","get",{fields:"id, link, name, last_name",id:uid,access_token:access_token},function(response){var app_scoped_user_id=response.link;$.ajax({url:"/account/profile/ajax/facebook.cfm",data:{action:"set_facebook_id",facebook_user_id:response.id,app_scoped_user_id:app_scoped_user_id}}).done(function(){$("#facebook_message").html("Linked To Facebook"),$("#facebook_button_text").html("Reset Link To Facebook")})})}else response.status})};var timeshift_media=void 0===timeshift_media?{}:timeshift_media;timeshift_media.location=window.location.href,timeshift_media.dev=-1<timeshift_media.location.search("dev."),"show_thumbnails"in timeshift_media||(timeshift_media.show_thumbnails={}),"class_thumbnails"in timeshift_media||(timeshift_media.class_thumbnails={}),timeshift_media.formatted_time=function(h,m,s){return h=parseInt(h).toString(),m=parseInt(m).toString(),s=parseInt(s).toString(),(h.length<2?"0":"")+h+(m.length<2?":0":":")+m+(s.length<2?":0":":")+s},timeshift_media.to_lower_case=function(match){return match.toLowerCase()},timeshift_media.check_required_fields=function(){for(field_name in error=!1,error_message="",minimum_fields=timeshift_media.required_fields,minimum_fields)$("#"+field_name).val().length<1&&(error=!0,error_message+=minimum_fields[field_name]);return 1!=error||(alert("The following fields are required:\n\n"+error_message),!1)},timeshift_media.check_form=function(){return timeshift_media.check_required_fields()},$.fancybox.defaults.opacity=50,$.fancybox.defaults.smallBtn=!0,$.fancybox.defaults.infobar=!1,$.fancybox.defaults.buttons=!1,$.fancybox.defaults.autosize=!1,timeshift_media.fancybox={},timeshift_media.iframe_sizes={A:[220,250],B:[250,250],C:[300,300],D:[300,460],E:[350,150],F:[400,300],G:[660,500],H:[820,620],I:[880,620],J:[950,660],K:[275,250],L:[640,350]},$("#fancybox_trigger").length&&show_modal_iframe("L","/account/my_acc_security_form.cfm"),timeshift_media.show_wait_box=function(){$("#pleaseWaitModal").modal({keyboard:!1,backdrop:"static"})},$(function(){$("[data-toggle=popover]").popover({html:!0,content:function(){var content=$(this).attr("data-popover-content");return $(content).children(".popover-body").html()},title:function(){var title=$(this).attr("data-popover-content");return $(title).children(".popover-heading").html()}})}),$("#tm-show-season-select").on("change",function(){top.location=this.value}),$(function(){$(".tab-content").swiperight(function(){var $tab=$("#tablist .active").prev();0<$tab.length&&$tab.find("a").tab("show")}),$(".tab-content").swipeleft(function(){var $tab=$("#tablist .active").next();0<$tab.length&&$tab.find("a").tab("show")})});var email_ok=!0;cc_card_type="unknown";var email_ok=!0;